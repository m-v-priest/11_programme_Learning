
= 类的继承
:sectnums:
:toclevels: 3
:toc: left

---


== 类的继承 (父类, 子类)

我们先写一个父类, 然后写两个子类, 继承自该父类.  然后在其中第二个子类中, 我们重写(覆盖掉)父类的一个方法.

最终的文件结构会如下:

image:img/0022.png[,]


.标题
====
例如： +
父类的文件: +
[source, java]
----
internal class ClsFather
{
    private string name;
    private int age;

    public void fnCan1()
    {
        Console.WriteLine("会爬");
    }

    public void fnCan2()
    {
        Console.WriteLine("会游");
    }
}

----


子类1 (ClsSon1)的文件 :
[source, java]
----
internal class ClsSon1 : ClsFather // 在子类后面, 写冒号, 和父类名称. 这样子类就继承了父类
{

}
----



子类2 (ClsSon1)的文件 :
[source, java]
----
internal class ClsSon2: ClsFather
{
    public string language; //添加一个子类2自己的数据

    public void fnCan2() //重写继承自父类的 fnCan2方法. 会覆盖掉父类的同名方法.
    {
        Console.WriteLine("会走(子类2专属)");
    }
}
----

然后在主文件中: +
[source, java]
----
static void Main(string[] args)
{
 ClsFather insFather  = new ClsFather(); //创建一个父类的实例对象
    insFather.fnCan1(); //会爬
    insFather.fnCan2(); //会游

    ClsSon1 insSon1 = new ClsSon1(); //创建一个"子类1"的对象.
    insSon1.fnCan1(); //会爬  ← 子类能调用"其继承的父类"中的方法
    insSon1.fnCan2(); //会游

    ClsSon2 insSon2 = new ClsSon2();
    insSon2.fnCan2(); //会走(子类2专属) ←由于在 ClsSon2 这个子类中, 我们覆盖了父类的同名方法, 所以这里, 就能直接子类2自己的该方法了.
}
----
====



.标题
====
例如：

本例的类图如下:

image:img/0023.png[,]


父类页面: +
[source, java]
----
internal class ClsPerson
{
    protected string name; //protected权限, 依然是私有的, 但能开放给子类访问.
    protected int age;

    //构造函数 ← 注意!! 父类中, 不需要写构造函数! 否则, 子类的构造函数中, 没法融入从父类继承来的变量数据, 会报错.  所以下面注释掉的代码都不需要写!
    //public ClsPerson(string name, int age)
    //{
    //    this.name = name;
    //    this.age = age;
    //}

    public void fnInfo()
    {
        Console.WriteLine("name: {0}, age:{1}",name,age);
    }

}
----

子类1的页面: +
[source, java]
----
internal class Cls内朝职务: ClsPerson //继承自父类 ClsPerson
{
    public int ab政治学能力;

    //构造函数
    public Cls内朝职务(string name, int age,int ab政治学能力) //这里, 除了在子类中定义的新添加的数据变量外, 还要把从父类中继承过来的数据变量, 也要写在这里. 进行赋值.
    {
        this.ab政治学能力 = ab政治学能力;
        this.name = name;
        this.age = age;
    }


    public void fn参论机要()
    {
        Console.WriteLine("{0} 参论机要. 政治能力是{1}", this.name, this.ab政治学能力);
    }
}
----


子类2的页面: +
[source, java]
----
internal class Cls外朝职务: ClsPerson  //继承自父类 ClsPerson
{
    protected int ab经济学能力;

    //构造函数
    public Cls外朝职务(string name, int age,int ab经济学能力) //别忘了, 在子类的构造方法中, 要把从父类继承来的数据, 也一起带进来赋值
    {
        this.ab经济学能力 = ab经济学能力;
        this.name = name;
        this.age = age;
    }

    public void fn开发经济()
    {
        Console.WriteLine("{0} 开发经济...  经济能力是{1}",this.name, this.ab经济学能力);
    }
}
----


主页面 +
[source, java]
----
static void Main(string[] args)
{
    Cls内朝职务 ins內朝官 = new Cls内朝职务("zrx", 16,99);
    ins內朝官.fnInfo(); //name: zrx, age:16
    ins內朝官.fn参论机要(); //zrx 参论机要. 政治能力是99

    Cls外朝职务 ins外朝官 = new Cls外朝职务("诸葛亮", 27, 98);
    ins外朝官.fn开发经济(); //诸葛亮 开发经济...  经济能力是98
}
----


====


---

== 子类的构造函数, 继承父类的构造函数

image:img/0025.png[,]

.标题
====
例如：

父类页面: +
[source, java]
----
internal class ClsFather
{
    protected string name;
    protected int money;

    //构造函数
    public ClsFather(string name, int money)
    {
        this.name = name;
        this.money = money;
    }

    public void fnGetMoney()
    {
        Console.WriteLine(this.money);
    }
}
----

子类页面: +
[source, java]
----
internal class ClsSon1 : ClsFather
{
    protected int money;  //这里子类覆盖了父类中同名的money数据

    public ClsSon1(int moneySon, string nameFahter, int moneyFather) : base(nameFahter, moneyFather)  //注意: 父类中有一个有参构造函数. 所以你子类定义构造函数时,必须把父类的构造函数中的数据也带进来赋值. 相当于"子类的构造函数"继承了"父类的构造函数", 所以要在子类构造函数后面, 加上 ":base(父类构造函数中的参数)"这个语句.  如果你父类的构造函数是无参的, 才不需要在这里传递父类的参数.
    {
        this.money = moneySon;
        base.money = moneyFather;  //base 就指代"父类", 这里, 我们在子类里面, 即在子类实例化时, 传参时, 可以连带给父类的实例中的数据来赋值,
        base.name = nameFahter;
    }

    public void fnGetMoney()
    {
        Console.WriteLine("儿子的钱是{0}, 父亲{1}的钱是{2}", this.money, base.name, base.money);
    }
}
----

image:img/0024.png[,]

主页面: +
[source, java]
----
static void Main(string[] args)
{
    ClsFather insFather = new ClsFather("zrx", 3000);
    insFather.fnGetMoney(); //3000

    ClsSon1 insSon1 = new ClsSon1(800, "zrx", 3000); //因为我们在ClsSon1子类的构造函数里, 规定要传入三个参数: 儿子的钱, 父亲的名字,父亲的钱
    insSon1.fnGetMoney(); //儿子的钱是800, 父亲zrx的钱是3000
}
----
====

一般, 我们不会在子类中, 去覆盖父类中的同名数据, 只会去覆盖同名方法(函数). 比如, 同样是 "fn_工作()", 子类的工作生态, 可能和父类的工作生态不一致. 所以可以在子类中, 重写父类的同名方法.


---

== 查看类图 (类的继承关系图)

先在 visual studio 的菜单:  工具 -> 获取工具和功能

image:img/0015.png[,]

安装 "扩展开发"

image:img/0016.png[,]

然后, 在"单个组件"中, 搜索"类", 勾选"类设计器".

image:img/0017.png[,]

然后, 点整个界面右下角的"修改" (相当于是安装功能)

选菜单: 视图 -> 类视图

image:img/0018.png[,]

image:img/0019.png[,]

image:img/0020.png[,]

image:img/0021.png[,]


---
