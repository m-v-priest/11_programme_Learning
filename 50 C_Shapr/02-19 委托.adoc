
= 委托 delegate
:sectnums:
:toclevels: 3
:toc: left

---

== 委托  (相当于一个指针, 指向另一个函数体)

委托类型的变量, 其实就相当于一个指针, 能指向另一个函数体. 从而这个委托变量, 就能当做那个函数来执行. +
委托, 就相当于它只有灵魂(有参数和返回值),没有身体(没有函数体),  它必须依附(指针指向)在一个身体(其他函数体)上, 才能执行那个函数功能.

[source, java]
----
static void fn卖房(int money, int age)
{
  Console.WriteLine("我是中介, 帮你卖房. 你的年龄是{0}, 资产是{1}", money, age);
}

static void fn理财投资(int money, int age)
{
  Console.WriteLine("我是中介, 帮你理财投资. 你的年龄是{0}, 资产是{1}", money, age);
}

//定义委托, 用delegate关键词.  注意, 定义委托类型时, 必须写在main函数前面.
delegate void MY委托(int money, int age); //这里, 1. 我们定义了一个委托类型, 叫"my委托"(注意,这里还不是变量, 只是个类型, 就像你自定义创建的"结构体"类型一样), 它就像"函数定义"一样, 有返回值, 有参数. 注意, 它的返回值和参数, 必须和你要挂钩到的"真正函数的返回值和参数", 完全一致.  2. 另外, 委托不需要写函数体. 因为我们这个委托会借用其他的函数体.

static void Main(string[] args)
{
  //下面, 我们再实例化这个委托类型, 创建出一个委托类型的变量
  MY委托 dlg中介;

  dlg中介= fn卖房;   //我们将委托变量, 指针指向函数"fn卖房", 现在, 这个委托变量, 就可以执行"fn卖房"的函数功能了.
  dlg中介(3000, 18); //我是中介, 帮你卖房. 你的年龄是3000, 资产是18

  //现在, 我们将这个委托变量, 重新指向另一个函数体.
  dlg中介 = fn理财投资;
  dlg中介(3000, 18); //我是中介, 帮你理财投资. 你的年龄是3000, 资产是18
}
----

即 +
image:img/0010.png[,]


.标题
====
例子: 给函数1传入另一个函数.  即 函数1, 接收一个"函数类型"的参数"函数2"进来.   这个参数"函数2", 其类型, 我们就可设为"委托类型".

[source, java]
----
delegate void Dlg委托类();  //创建委托类, 这里我们没有给它设置接收的函数参数
static void fn日常运营(Dlg委托类 var委托) //这个函数接收一个"函数类型的参数", 会把传入的函数, 赋值给 "var委托"这个变量.
{
  Console.WriteLine("听取属下提案");
  var委托();   //执行这个"委托变量"指向的函数, 即作为参数传入"本fn日常运营()函数"中的 "fn判断是否出征他国()函数".
}

static void fn判断是否出征他国()
{
  Console.WriteLine("军方判断是否出征敌国");
}

static void Main(string[] args)
{
  fn日常运营(fn判断是否出征他国); //给函数, 传入另一个函数作为参数.
}
----

即: +
image:img/0011.png[,]

这个程序的输出是: +
听取属下提案 +
军方判断是否出征敌国
====

---

