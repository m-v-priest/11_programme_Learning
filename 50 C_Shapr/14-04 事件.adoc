
= 事件
:sectnums:
:toclevels: 3
:toc: left

---

== 事件

在事件中，存在两个角色：事件发布者和事件订阅者。事件发布者，就是发布消息的角色(甲方, 发号施令者)，事件订阅者，就是收到事件发生消息或者处理事件的角色(乙方,做事者)。

例如，当我们按下视频播放按钮时，视频播放。在这件事中，按钮充当了事件发布者，他告诉事件订阅者事件发生了，然后事件订阅者接收到消息，做出播放视频的动作。

在C# 中，定义事件的语法如下：
....
访问修饰符 event 委托类型 事件名;
....

访问修饰符一般定义为public，因为事件的订阅者需要对事件进行订阅和取消订阅的操作，定义为public可使事件对其它类可见；

委托类型，可以理解为事件订阅者(乙方,做事者)，事件发生时，就可以通过委托，调用一系列方法做出处理；

既然在事件定义中，我们使用了委托，并且委托就是事件订阅者(乙方,做事者)，那么就可以使用+和-来订阅和取消订阅事件。


事件, 其实就是一个受了限制的委托.event相当于一种权限限制的关键词. 用来限制"委托"的权限.


.标题
====
例如：

[,subs=+quotes]
----
namespace ConsoleApp2
{

    //委托
    delegate void dlg采购员身上的委托(); //声明一个委托

    internal class Cls采购员
    {
        public string Name { get; set; }

        //注意: 我们下面在创建委托变量时, 加了个关键词 event,这样后, 1.对该委托指针, 就只能给它增加(+=)指针指向的函数, 或减少(-=)指向的函数, 而不能直接用等号赋值 (= 会报错).  2. 该委托事件,只能在类的内部被触发.事件其实就是在内部把一个委托实例封装起来，向外只提供注册和注销方法。总之,事件其实就是一个受了限制的委托.event相当于一种权限限制的关键词.
        *public #event# dlg采购员身上的委托 ins采购员身上的委托函数指针* = null; //创建一个委托变量.

        //构造函数
        public Cls采购员(string name)
        {
            Name = name;
        }

        public void fn外出采购()
        {
            Console.WriteLine("{0}外出采购了", Name); //注意, 这里因为用了Name属性, 而非name字段, 所以要用大写的Name了

            if (ins采购员身上的委托函数指针 != null)
            {
                ins采购员身上的委托函数指针();
            }
        }
    }
}
----


==



152

