<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1312.2 932.84"><defs><style>.cls-1{fill:#f39800;}.cls-2{fill:#c30d23;}.cls-3{fill:#8fc31f;}.cls-4{fill:#00a0e9;}.cls-12,.cls-14,.cls-5,.cls-6,.cls-7,.cls-8{fill:none;stroke-miterlimit:10;}.cls-5{stroke:#00a0e9;}.cls-6{stroke:#f39800;}.cls-7{stroke:#c30d23;}.cls-8{stroke:#094;}.cls-9{fill:#094;}.cls-10,.cls-15,.cls-16,.cls-21{fill:#231815;}.cls-11{font-size:29.7px;fill:#fff;}.cls-11,.cls-18,.cls-21{font-family:MicrosoftYaHei, Microsoft YaHei;}.cls-12{stroke:#00913a;}.cls-13{fill:#00913a;}.cls-14{stroke:#231815;stroke-width:0.5px;}.cls-15{font-size:17px;}.cls-15,.cls-16{font-family:MicrosoftYaHei-Bold, Microsoft YaHei;font-weight:700;}.cls-16{font-size:22.27px;}.cls-17{letter-spacing:0em;}.cls-18,.cls-21{font-size:14px;}.cls-19{letter-spacing:-0.01em;}.cls-20{letter-spacing:-0.01em;}.cls-22{letter-spacing:-0.03em;}.cls-23{letter-spacing:0.03em;}.cls-24{letter-spacing:-0.02em;}.cls-25{letter-spacing:0em;}.cls-26{letter-spacing:-0.03em;}.cls-27{letter-spacing:0em;}.cls-28{letter-spacing:0em;}.cls-29{letter-spacing:-0.03em;}.cls-30{letter-spacing:-0.03em;}.cls-31{letter-spacing:-0.01em;}</style></defs><title>资源 13</title><g id="图层_2" data-name="图层 2"><g id="图层_1-2" data-name="图层 1"><rect class="cls-1" x="171" y="140.63" width="135" height="26"/><rect class="cls-2" x="722" y="602.63" width="83" height="26"/><rect class="cls-2" x="77" y="140.63" width="83" height="26"/><rect class="cls-2" x="872" y="666.63" width="133" height="26"/><rect class="cls-2" x="780" y="751.63" width="60" height="26"/><rect class="cls-2" x="762" y="792.63" width="40" height="26"/><rect class="cls-1" x="90" y="202.63" width="133" height="26"/><rect class="cls-1" x="723" y="383.63" width="117" height="26"/><rect class="cls-3" x="4.53" y="722.59" width="196" height="26"/><rect class="cls-3" x="187" y="562.63" width="225" height="26"/><rect class="cls-3" x="1008" y="666.63" width="72" height="26"/><rect class="cls-3" x="735" y="690.63" width="72" height="26"/><rect class="cls-3" x="81.53" y="780.59" width="325" height="26"/><rect class="cls-1" x="158" y="456.63" width="126" height="26"/><rect class="cls-1" x="673" y="283.63" width="151" height="26"/><rect class="cls-4" x="670" y="543.63" width="218" height="26"/><rect class="cls-4" x="695" y="666.63" width="157" height="26"/><rect class="cls-4" x="933" y="383.63" width="125" height="26"/><rect class="cls-1" x="60" y="562.63" width="121" height="26"/><polyline class="cls-5" points="894 557.63 997 557.63 997 422.69"/><polygon class="cls-4" points="997 415.63 1001.07 425.58 997 423.22 992.94 425.58 997 415.63"/><polyline class="cls-6" points="664 295.63 517.5 149.13 319.06 149.13"/><polygon class="cls-1" points="312 149.13 321.95 145.06 319.59 149.13 321.95 153.19 312 149.13"/><polyline class="cls-7" points="664 281.63 517.5 135.13 319.06 135.13"/><polygon class="cls-2" points="312 135.13 321.95 131.06 319.59 135.13 321.95 139.19 312 135.13"/><polyline class="cls-7" points="1052 765.63 1197 765.63 1197 297.63 836.06 297.63"/><polygon class="cls-2" points="829 297.63 838.95 293.56 836.59 297.63 838.95 301.69 829 297.63"/><polyline class="cls-7" points="1003 806.58 1215.41 806.58 1215.41 286.75 836.06 286.75"/><polygon class="cls-2" points="829 286.75 838.95 282.69 836.59 286.75 838.95 290.82 829 286.75"/><polyline class="cls-8" points="251.04 592.63 251.04 703.03 704.94 703.03"/><polygon class="cls-9" points="712 703.03 702.05 707.1 704.41 703.03 702.05 698.97 712 703.03"/><circle class="cls-10" cx="407" cy="106.13" r="21.5"/><text class="cls-11" transform="translate(398.29 116.57)">1</text><circle class="cls-10" cx="170.14" cy="663.36" r="21.5"/><text class="cls-11" transform="translate(161.43 673.8)">2</text><circle class="cls-10" cx="480.82" cy="734.49" r="21.5"/><text class="cls-11" transform="translate(472.11 744.94)">3</text><circle class="cls-10" cx="1243" cy="535.63" r="21.5"/><text class="cls-11" transform="translate(1234.29 546.07)">4</text><line class="cls-12" x1="200.82" y1="723.07" x2="200.82" y2="604.14"/><polygon class="cls-13" points="200.82 597.08 204.88 607.03 200.82 604.66 196.75 607.03 200.82 597.08"/></g><g id="图层_4" data-name="图层 4"><rect class="cls-14" x="1" y="28.63" width="599" height="601"/><rect class="cls-14" x="32.13" y="93.63" width="481.49" height="167"/><text class="cls-15" transform="translate(0 14.63)">客户 Cpn组件</text><text class="cls-16" transform="translate(451 98.25)">1-1.客户先通过银行, <tspan x="0" y="26.73">拿到他托管在财务专家那里的sta</tspan><tspan class="cls-17" x="322.66" y="26.73">t</tspan><tspan x="331.78" y="26.73">e对象</tspan></text><text class="cls-16" transform="translate(390 194.25)">1-2.对财务专家进行监听, 一但后者更改了sta<tspan class="cls-17" x="446.04" y="0">t</tspan><tspan x="455.16" y="0">e对象, </tspan><tspan x="0" y="26.73">就执行一个回调函数</tspan></text><text class="cls-16" transform="translate(275 662.25)">3.客户向银行发出命令书,<tspan x="0" y="26.73">银行会把命令书转交给财务专家</tspan></text><text class="cls-16" transform="translate(1012 447.25)">4.财务专家根据客户的命令书,<tspan x="0" y="26.73">修改完sta</tspan><tspan class="cls-17" x="99.91" y="26.73">t</tspan><tspan x="109.04" y="26.73">e对象后,</tspan><tspan x="0" y="53.46">再把新的sta</tspan><tspan class="cls-17" x="122.18" y="53.46">t</tspan><tspan x="131.31" y="53.46">e对象返回给银行</tspan></text><text class="cls-15" transform="translate(8.53 741.59)">命令书的制造工厂(函数)</text><text class="cls-18" transform="translate(29 64.63)">//导入银行, 导入命令书制造工厂</text><text class="cls-18" transform="translate(40 114.63)">construc<tspan class="cls-19" x="57.24" y="0">t</tspan><tspan x="62.34" y="0">or()构造函数</tspan></text><rect class="cls-14" x="32.13" y="289.63" width="481.49" height="93"/><text class="cls-18" transform="translate(40 310.63)"><tspan class="cls-20">r</tspan><tspan x="5.15" y="0">ender()</tspan></text><text class="cls-21" transform="translate(96 159.63)">this.sta<tspan class="cls-19" x="46.85" y="0">t</tspan><tspan x="51.95" y="0">e = obj</tspan><tspan class="cls-22" x="100.14" y="0">S</tspan><tspan class="cls-19" x="107.73" y="0">t</tspan><tspan x="112.83" y="0">o</tspan><tspan class="cls-20" x="121.73" y="0">r</tspan><tspan x="126.88" y="0">e.get</tspan><tspan class="cls-22" x="160.31" y="0">S</tspan><tspan x="167.9" y="0">ta</tspan><tspan class="cls-19" x="180.86" y="0">t</tspan><tspan x="185.96" y="0">e() </tspan><tspan x="0" y="21">//先从银行实例中拿到最原始的sta</tspan><tspan class="cls-19" x="213.4" y="21">t</tspan><tspan x="218.5" y="21">e对象</tspan><tspan x="0" y="63">obj</tspan><tspan class="cls-22" x="21.58" y="63">S</tspan><tspan class="cls-19" x="29.18" y="63">t</tspan><tspan x="34.28" y="63">o</tspan><tspan class="cls-20" x="43.18" y="63">r</tspan><tspan x="48.32" y="63">e.subscribe(this.fn_upda</tspan><tspan class="cls-19" x="209.25" y="63">t</tspan><tspan x="214.35" y="63">eThis</tspan><tspan class="cls-22" x="249.14" y="63">S</tspan><tspan x="256.74" y="63">ta</tspan><tspan class="cls-19" x="269.69" y="63">t</tspan><tspan x="274.79" y="63">e) </tspan><tspan x="0" y="84">//检测财务专家对sta</tspan><tspan class="cls-19" x="129.4" y="84">t</tspan><tspan x="134.5" y="84">e的更新, 如果有更新, 就执行一个回调函数</tspan></text><rect class="cls-14" x="8.8" y="755.59" width="466.46" height="177"/><text class="cls-21" transform="translate(35.78 800.59)">expo<tspan class="cls-23" x="32.88" y="0">r</tspan><tspan x="38.66" y="0">t function fn_创建命令书_更新sta</tspan><tspan class="cls-19" x="251.23" y="0">t</tspan><tspan x="256.33" y="0">e中的某属性(新值){</tspan><tspan x="0" y="16.8" xml:space="preserve">    let 命令书对象objAction = { </tspan><tspan x="0" y="33.6" xml:space="preserve">        type: &apos;命令书_更新某属性&apos;,  //指令名</tspan><tspan x="0" y="50.4" xml:space="preserve">        </tspan><tspan class="cls-24" x="33.14" y="50.4">v</tspan><tspan x="40.22" y="50.4" xml:space="preserve">alue: 新值,                        //附带的新值</tspan><tspan x="0" y="67.2" xml:space="preserve">    }</tspan><tspan x="0" y="84" xml:space="preserve">    </tspan><tspan class="cls-20" x="16.57" y="84">r</tspan><tspan x="21.72" y="84">etu</tspan><tspan class="cls-25" x="43.5" y="84">r</tspan><tspan x="48.82" y="84">n 命令书对象objAction</tspan><tspan x="0" y="100.8">}</tspan></text><text class="cls-15" transform="translate(675 301.63)">银行 <tspan class="cls-26" x="39.06" y="0">S</tspan><tspan class="cls-27" x="48.82" y="0">t</tspan><tspan x="55.78" y="0">o</tspan><tspan class="cls-28" x="66.95" y="0">r</tspan><tspan x="74.08" y="0">e(对象)</tspan></text><rect class="cls-14" x="675.27" y="315.63" width="466.46" height="177"/><text class="cls-21" transform="translate(702.25 360.63)">//导入 财务专家 fn<tspan class="cls-29" x="117.73" y="0">R</tspan><tspan x="126.44" y="0">educer</tspan><tspan x="0" y="42">let 银行实例obj</tspan><tspan class="cls-22" x="98.61" y="42">S</tspan><tspan class="cls-19" x="106.2" y="42">t</tspan><tspan x="111.3" y="42">o</tspan><tspan class="cls-20" x="120.2" y="42">r</tspan><tspan x="125.35" y="42">e = c</tspan><tspan class="cls-20" x="158.98" y="42">r</tspan><tspan x="164.13" y="42">ea</tspan><tspan class="cls-19" x="179.81" y="42">t</tspan><tspan x="184.91" y="42">e</tspan><tspan class="cls-22" x="192.86" y="42">S</tspan><tspan class="cls-19" x="200.45" y="42">t</tspan><tspan x="205.55" y="42">o</tspan><tspan class="cls-20" x="214.45" y="42">r</tspan><tspan x="219.6" y="42">e(财务专家fn</tspan><tspan class="cls-29" x="301.7" y="42">R</tspan><tspan x="310.41" y="42">educer) </tspan><tspan x="0" y="63">//输入财务专家, 创建出银行实例</tspan><tspan x="0" y="105">expo</tspan><tspan class="cls-23" x="32.88" y="105">r</tspan><tspan x="38.66" y="105">t default 银行实例obj</tspan><tspan class="cls-22" x="176.8" y="105">S</tspan><tspan class="cls-19" x="184.4" y="105">t</tspan><tspan x="189.5" y="105">o</tspan><tspan class="cls-20" x="198.4" y="105">r</tspan><tspan x="203.55" y="105">e</tspan></text><text class="cls-15" transform="translate(675 564.63)">财务专家 fn<tspan class="cls-30" x="90.97" y="0">R</tspan><tspan x="102.37" y="0">educer(函数)</tspan></text><rect class="cls-14" x="675.27" y="578.63" width="466.46" height="332"/><text class="cls-21" transform="translate(702.25 623.63)">let default<tspan class="cls-22" x="68.09" y="0">S</tspan><tspan x="75.68" y="0">ta</tspan><tspan class="cls-19" x="88.63" y="0">t</tspan><tspan x="93.73" y="0">e = {} </tspan><tspan x="0" y="21">//客户托管在财务专家这里的最原始的sta</tspan><tspan class="cls-19" x="255.4" y="21">t</tspan><tspan x="260.5" y="21">e对象</tspan><tspan x="0" y="63">let 财务专家fn</tspan><tspan class="cls-29" x="90.51" y="63">R</tspan><tspan x="99.22" y="63">educer = (sta</tspan><tspan class="cls-19" x="187.84" y="63">t</tspan><tspan x="192.94" y="63">e = default</tspan><tspan class="cls-22" x="266.61" y="63">S</tspan><tspan x="274.2" y="63">ta</tspan><tspan class="cls-19" x="287.16" y="63">t</tspan><tspan x="292.26" y="63">e, 指令书对象) =&gt; { </tspan><tspan x="0" y="84" xml:space="preserve">    if (指令书对象.type === &apos;命令书_更新sta</tspan><tspan class="cls-19" x="275.58" y="84">t</tspan><tspan x="280.68" y="84">e中的某属性&apos;) { </tspan><tspan x="0" y="105" xml:space="preserve">        深拷贝老的sta</tspan><tspan class="cls-19" x="122.58" y="105">t</tspan><tspan x="127.67" y="105">e对象,得到一个sta</tspan><tspan class="cls-19" x="242.42" y="105">t</tspan><tspan x="247.52" y="105">e副本</tspan><tspan x="0" y="126" xml:space="preserve">        对副本进行修改</tspan><tspan x="0" y="147" xml:space="preserve">        </tspan><tspan class="cls-20" x="33.14" y="147">r</tspan><tspan x="38.29" y="147">etu</tspan><tspan class="cls-25" x="60.07" y="147">r</tspan><tspan x="65.39" y="147">n sta</tspan><tspan class="cls-19" x="97.6" y="147">t</tspan><tspan x="102.7" y="147">e副本 //把sta</tspan><tspan class="cls-19" x="188.18" y="147">t</tspan><tspan x="193.28" y="147">e副本,返回给了银行实例</tspan><tspan x="0" y="168" xml:space="preserve">    }</tspan><tspan x="0" y="189" xml:space="preserve">    </tspan><tspan class="cls-20" x="16.57" y="189">r</tspan><tspan x="21.72" y="189">etu</tspan><tspan class="cls-25" x="43.5" y="189">r</tspan><tspan x="48.82" y="189">n sta</tspan><tspan class="cls-19" x="81.03" y="189">t</tspan><tspan x="86.13" y="189">e //如果没有进入上面的if语句块, </tspan><tspan x="0" y="210" xml:space="preserve">                          本财务专家函数也要返回一个sta</tspan><tspan class="cls-19" x="309.14" y="210">t</tspan><tspan x="314.24" y="210">e对象(此时就是老的default sta</tspan><tspan class="cls-19" x="509.5" y="210">t</tspan><tspan x="514.6" y="210">e了)</tspan><tspan x="0" y="252">expo</tspan><tspan class="cls-23" x="32.88" y="252">r</tspan><tspan x="38.66" y="252">t default 财务专家fn</tspan><tspan class="cls-29" x="168.7" y="252">R</tspan><tspan x="177.42" y="252">educer</tspan></text><text class="cls-21" transform="translate(96 347.63)"><tspan xml:space="preserve">按钮事件:  this.fn_发送命令书_更新sta</tspan><tspan class="cls-19" x="238.53" y="0">t</tspan><tspan x="243.63" y="0">e中的某属性(e</tspan><tspan class="cls-31" x="334.2" y="0">v</tspan><tspan x="341.46" y="0">ent)</tspan></text><text class="cls-21" transform="translate(49 453.63)">回调函数 fn_upda<tspan class="cls-19" x="114.16" y="0">t</tspan><tspan x="119.26" y="0">eThis</tspan><tspan class="cls-22" x="154.05" y="0">S</tspan><tspan x="161.65" y="0">ta</tspan><tspan class="cls-19" x="174.6" y="0">t</tspan><tspan x="179.7" y="0">e = () =&gt; {</tspan><tspan x="0" y="21" xml:space="preserve">      this.set</tspan><tspan class="cls-22" x="71.91" y="21">S</tspan><tspan x="79.5" y="21">ta</tspan><tspan class="cls-19" x="92.46" y="21">t</tspan><tspan x="97.56" y="21">e(obj</tspan><tspan class="cls-22" x="131.76" y="21">S</tspan><tspan class="cls-19" x="139.35" y="21">t</tspan><tspan x="144.45" y="21">o</tspan><tspan class="cls-20" x="153.35" y="21">r</tspan><tspan x="158.5" y="21">e.get</tspan><tspan class="cls-22" x="191.93" y="21">S</tspan><tspan x="199.52" y="21">ta</tspan><tspan class="cls-19" x="212.47" y="21">t</tspan><tspan x="217.57" y="21">e())</tspan><tspan x="0" y="42" xml:space="preserve">      //j将从银行中拿到财务专家修改后的客户的新账本, 整个替换掉本组件的sta</tspan><tspan class="cls-19" x="487.5" y="42">t</tspan><tspan x="492.6" y="42">e对象</tspan><tspan x="0" y="63">}</tspan></text><text class="cls-21" transform="translate(49 559.63)">fn_发送命令书_更新sta<tspan class="cls-19" x="143.47" y="0">t</tspan><tspan x="148.57" y="0">e中的某属性 = (e</tspan><tspan class="cls-31" x="257.8" y="0">v</tspan><tspan x="265.06" y="0">ent) =&gt; {</tspan><tspan x="0" y="21" xml:space="preserve">    obj</tspan><tspan class="cls-22" x="38.15" y="21">S</tspan><tspan class="cls-19" x="45.75" y="21">t</tspan><tspan x="50.85" y="21">o</tspan><tspan class="cls-20" x="59.75" y="21">r</tspan><tspan x="64.89" y="21">e.dis</tspan><tspan class="cls-20" x="95.37" y="21">p</tspan><tspan x="104.11" y="21">a</tspan><tspan class="cls-20" x="111.85" y="21">t</tspan><tspan x="116.87" y="21">ch(fn_创建命令书_更新sta</tspan><tspan class="cls-19" x="280.65" y="21">t</tspan><tspan x="285.75" y="21">e中的某属性(e</tspan><tspan class="cls-31" x="376.31" y="21">v</tspan><tspan x="383.57" y="21">ent.ta</tspan><tspan class="cls-20" x="421.68" y="21">r</tspan><tspan x="426.83" y="21">get.</tspan><tspan class="cls-24" x="452.31" y="21">v</tspan><tspan x="459.39" y="21">alue))</tspan><tspan x="0" y="42">}</tspan></text></g></g></svg>